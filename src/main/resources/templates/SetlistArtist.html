<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Setlist Page</title>
    <link rel="stylesheet" th:href="@{/css/Setlist.css}">
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
</head>
<body>
    <div th:include="fragments/Header :: Header" id="headerDiv"></div>
    <div class="container">
        <div class="setlist-section">
            <h2>
                Song list for
                <span th:text="${artistName}"></span>
            </h2>
            <ol class="song">
                <li class="eachSong" th:each="song : ${setlist.songs}">
                    <span th:text="${song.getTitle()}"></span>
                </li>
            </ol>

            <div class="edit-setlist">
                <a th:href="@{/setlist/edit?show_id={showId}&artist_id={artistId}(showId=${showId}, artistId=${artistId})}">
                    <span>Edit Setlist</span>
                </a>
            </div>

            <div class="comment">
                <h4>Recent Comments:</h4>
                <ul id="commentsList">
                    <li th:each="review, iterStat : ${reviews}" th:text="${review.comment}" 
                        th:classappend="${iterStat.index > 4} ? 'hidden' : ''"></li>
                </ul>
                <span id="seeMoreComments" class="seeMoreComments">See More</span>
            </div>
            
        </div>
    </div>
    <footer th:include="fragments/footer :: footer"></footer>

    <script>
        document.getElementById("seeMoreComments").addEventListener("click", function() {
            const hiddenComments = document.querySelectorAll("#commentsList .hidden");
            hiddenComments.forEach(comment => comment.classList.remove("hidden"));

            this.style.display = "none";
        });
    </script>
  </body>
</html>
